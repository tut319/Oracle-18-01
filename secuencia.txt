--GENERAR LA SIGUIENTE TABLA EN ORALE QUE TENGA SU CAMPO PK AUTOINCREMENTADO DE
--2 EN 2 EMPEZANDO DESDE EL 1. ES DECIR LLEVARA LA SECUENCIA 1,3,5,7,9
--NOTA: EN ORACLE NO EXISTE EL AUTO_INCREMENT 
--EN ORACLE PARA AUTOINCREMENTAR UN PK SE DEBE USAR OTRO OBJETO DE BASE DE DATOS LLAMADO SECUENCIA. 


CREATE TABLE NOMINAS(ID_NOMINA INTEGER PRIMARY KEY,
                       NOMBRE VARCHAR2 (60));
--GENERAR UNA SECUENCIA 
CREATE SEQUENCE SEC_NOMINAS 
START WITH 1
INCREMENT BY 2
NOMAXVALUE;

--CREAR EL PROCEDIMIENTO DE ENLACE DE TABLA Y SECUENCIA 

CREATE OR REPLACE PROCEDURE GUARDAR_NOMINA(MY_ID OUT INTEGER,
MY_NOMBRE IN VARCHAR2)
AS 
BEGIN 
SELECT SEC_NOMINAS.NEXTVAL INTO MY_ID FROM DUAL;
INSERT INTO NOMINAS VALUES(MY_ID, MY_NOMBRE);
END;
/

--FINALMENTE VAMOS A PROBAR EL PROCEDIMIENTO CON UN BLOQUE PL SQL 
DECLARE 
VALOR INTEGER;
BEGIN
GUARDAR_NOMINA(VALOR, 'JUAN');
DBMS_OUTPUT.PUT_LINE('EL PK GENERADO ES '|| VALOR);
END;
/

SELECT * FROM NOMINAS;